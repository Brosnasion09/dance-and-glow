<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DANCE AND GLOW</title>
    <link rel="icon" type="image/png" href="icono.png">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Montserrat', sans-serif; font-weight: 700; scroll-behavior: smooth; }
        header { position: relative; width: 100vw; height: 80vh; overflow: hidden; color: white; text-align: center; display: flex; align-items: center; justify-content: center; margin: 0 auto; }
        .header-video { width: 100%; height: 100%; object-fit: contain; object-position: center center; position: absolute; top: 0; left: 0; z-index: 1; opacity: 0.7; }
        header::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.4); z-index: 2; }
        header > * { position: relative; z-index: 3; }
        @media only screen and (max-width: 375px) and (max-height: 667px) { .header-video { width: 100%; height: 100%; object-fit: contain; } header { height: 80vh; } }
        .main-image { position: relative; width: 100vw; height: 94vh; background: url('principal.jpg') no-repeat center center; background-size: contain; margin: 0 auto; }
        .main-image::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.3); z-index: 1; }
        .full-image-1 { position: relative; width: 100vw; height: 94vh; background: url('4.jpg') no-repeat center center; background-size: contain; margin: 0 auto; }
        .full-image-1::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.3); z-index: 1; }
        .full-image-2 { position: relative; width: 100vw; height: 94vh; background: url('5.jpg') no-repeat center center; background-size: contain; margin: 0 auto; }
        .full-image-2::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.3); z-index: 1; }
        .full-image-3 { position: relative; width: 100vw; height: 94vh; background: url('6.jpg') no-repeat center center; background-size: contain; margin: 0 auto; }
        .full-image-3::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.3); z-index: 1; }
        .hero { position: relative; width: 100vw; height: 94vh; background: url('1.jpg') no-repeat center center; background-size: contain; display: flex; align-items: flex-end; justify-content: center; text-align: center; color: white; text-shadow: 3px 3px 10px rgba(0,0,0,0.5); margin: 0 auto; }
        .hero::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.3); z-index: 1; }
        .hero > div { position: relative; z-index: 2; width: 90%; max-width: 600px; margin: 0 auto 5%; }
        .countdown { display: flex; flex-wrap: wrap; justify-content: center; gap: 0.5rem; font-size: clamp(0.6rem, 2.5vw, 1rem); font-weight: 900; letter-spacing: 1px; }
        .countdown div { background: rgba(255, 255, 255, 0.2); padding: 0.5rem; border-radius: 6px; min-width: 40px; text-align: center; }
        .countdown span { display: block; font-size: clamp(0.4rem, 1.2vw, 0.5rem); font-weight: 700; }
        .gallery-button { display: inline-block; margin-top: 1.5rem; padding: 0.8rem 2rem; background: #ffd700; color: #4682b4; text-decoration: none; border-radius: 30px; font-size: clamp(1rem, 3vw, 1.2rem); font-weight: 700; text-transform: uppercase; transition: all 0.3s ease-in-out; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); animation: pulse 2s infinite; }
        .gallery-button:hover { background: #4682b4; color: white; transform: scale(1.1); box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3); }
        @keyframes pulse { 0% { transform: scale(1); box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); } 50% { transform: scale(1.05); box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3); } 100% { transform: scale(1); box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); } }
        .guest-list { position: relative; width: 100vw; height: 94vh; background: url('2.jpg') no-repeat center center; background-size: contain; text-align: center; color: white; display: flex; align-items: flex-start; justify-content: center; padding: 1rem 1rem; margin: 0 auto; }
        .guest-list::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.4); z-index: 1; }
        .guest-list > * { position: relative; z-index: 2; width: 90%; max-width: 700px; margin: 0 auto; }
        .guest-list h2 { font-size: clamp(1.4rem, 4.2vw, 2.1rem); color: white; margin-bottom: 1rem; font-weight: 900; text-transform: uppercase; }
        .guest-list ul { list-style: none; text-align: left; margin: 0; padding: 0; }
        .guest-list li { background: rgba(255, 255, 255, 0.9); padding: 1rem; margin: 0; border-radius: 0; font-size: clamp(0.7rem, 2.45vw, 0.84rem); color: #333; font-weight: 700; }
        .guest-list li:not(:last-child) { border-bottom: 1px solid rgba(0, 0, 0, 0.1); }
        .guest-list .full-list-link { display: inline-block; margin-top: 0.5rem; padding: 0.5rem 1rem; background: #ffd700; color: #4682b4; text-decoration: none; border-radius: 20px; font-size: clamp(0.7rem, 2vw, 0.9rem); font-weight: 700; transition: all 0.3s ease-in-out; }
        .guest-list .full-list-link:hover { background: #4682b4; color: white; transform: scale(1.05); }
        .rsvp { position: relative; width: 100vw; height: 94vh; background: url('3.jpg') no-repeat center center; background-size: contain; text-align: center; color: white; padding: 5rem 1rem; margin: 0 auto; }
        .rsvp::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.4); z-index: 1; }
        .rsvp > * { position: relative; z-index: 2; width: 90%; max-width: 700px; margin: 0 auto; }
        .rsvp h2 { font-size: clamp(2rem, 6vw, 3rem); color: white; margin-bottom: 2rem; font-weight: 900; text-transform: uppercase; }
        .rsvp-button { display: inline-block; padding: 1rem 2rem; background: #4682b4; color: white; text-decoration: none; border-radius: 30px; font-size: clamp(1.2rem, 4vw, 1.4rem); font-weight: 700; text-transform: uppercase; transition: all 0.3s ease-in-out; }
        .rsvp-button:hover { background: #ffd700; color: #4682b4; transform: scale(1.05); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        @keyframes slideIn { 0% { opacity: 0; transform: translateY(50px); } 100% { opacity: 1; transform: translateY(0); } }
        section { opacity: 0; transform: translateY(50px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        section.visible { opacity: 1; transform: translateY(0); }
        @media (min-width: 768px) { .countdown { gap: 0.8rem; } .guest-list, .rsvp { padding: 5rem 2rem; } .guest-list { padding: 1rem 2rem; } }
        @media (max-width: 767px) { .guest-list, .rsvp { background-size: cover; } }
        @media (max-width: 360px) { .countdown div { min-width: 35px; } .rsvp-button { padding: 0.8rem 1.5rem; } }
    </style>
</head>
<body>
    <header>
        <video id="header-video" autoplay muted loop playsinline class="header-video">
            <source src="parte 1 xv(1).mp4" type="video/mp4">
            Tu navegador no soporta videos.
        </video>
    </header>
    <section class="main-image" id="main-image"></section>
    <section class="full-image-1" id="full-image-1"></section>
    <section class="full-image-2" id="full-image-2"></section>
    <section class="hero" id="inicio">
        <div>
            <div class="countdown" id="countdown">
                <div><span id="days">0</span>Días</div>
                <div><span id="hours">0</span>Horas</div>
                <div><span id="minutes">0</span>Minutos</div>
                <div><span id="seconds">0</span>Segundos</div>
            </div>
            <a href="galeria.html" class="gallery-button">Ver Galería</a>
        </div>
    </section>
    <section class="full-image-3" id="full-image-3"></section>
    <section class="guest-list" id="invitados">
        <h2>Lista de Invitados Confirmados</h2>
        <ul id="guestList"></ul>
    </section>
    <section class="rsvp" id="rsvp">
        <h2>Confirma tu Asistencia</h2>
        <a href="https://forms.gle/LPmZ2wMBkGyBo1BP6" target="_blank" class="rsvp-button">Enviar RSVP</a>
    </section>

    <script>
        const GITHUB_JSON_URL = 'https://raw.githubusercontent.com/Brosnasion09/dance-and-glow/main/guests.json';
        let allGuests = [];

        document.addEventListener('DOMContentLoaded', () => {
            const video = document.getElementById('header-video');
            const sections = document.querySelectorAll('section');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.2 });

            sections.forEach(section => observer.observe(section));
            video.play().catch((error) => {
                console.log("Autoplay bloqueado:", error);
                setTimeout(() => video.play(), 1000);
            });

            fetchGuests(); // Cargar al inicio
            setInterval(fetchGuests, 10000); // Actualizar cada 10 segundos
        });

        function fetchGuests() {
            fetch(GITHUB_JSON_URL)
                .then(response => {
                    if (!response.ok) throw new Error('Error al cargar el JSON: ' + response.status);
                    return response.json();
                })
                .then(data => {
                    const newGuests = data.filter(name => name); // Filtra nombres vacíos
                    if (JSON.stringify(newGuests) !== JSON.stringify(allGuests)) {
                        allGuests = newGuests;
                        const guestList = document.getElementById('guestList');
                        guestList.innerHTML = '';
                        if (allGuests.length === 0) {
                            guestList.innerHTML = '<li>No hay invitados confirmados aún</li>';
                        } else {
                            const displayGuests = allGuests.slice(0, 10);
                            displayGuests.forEach(nombre => {
                                const li = document.createElement('li');
                                li.textContent = nombre;
                                guestList.appendChild(li);
                            });
                            const fullListLink = document.createElement('a');
                            fullListLink.href = 'confirmed-guests.html';
                            fullListLink.className = 'full-list-link';
                            fullListLink.textContent = 'Ver Lista Completa';
                            guestList.appendChild(fullListLink);
                        }
                    }
                })
                .catch(error => {
                    console.error('Error al cargar invitados:', error);
                    document.getElementById('guestList').innerHTML = '<li>Error al cargar la lista</li>';
                });
        }

        function updateCountdown() {
            const eventDate = new Date('May 17, 2025 18:30:00').getTime();
            const now = new Date().getTime();
            const distance = eventDate - now;

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById('days').textContent = days;
            document.getElementById('hours').textContent = hours;
            document.getElementById('minutes').textContent = minutes;
            document.getElementById('seconds').textContent = seconds;

            if (distance < 0) {
                clearInterval(countdownInterval);
                document.getElementById('countdown').innerHTML = "¡El evento ha comenzado!";
            }
        }

        const countdownInterval = setInterval(updateCountdown, 1000);
        updateCountdown();
    </script>
</body>
</html>
